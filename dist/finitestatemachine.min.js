!function(t,e){"function"==typeof define&&define.amd?define(["./../../eventhandler/dist/eventhandler.min.js"],e):"object"==typeof exports?module.exports=e(require("eventhandler")):(t.FiniteStateMachine=e(t.EventHandler),void 0===t.FSM&&(t.FSM=t.FiniteStateMachine))}(this,function(t){"use strict";function e(e){t.call(this,e||this),this._states={},this._currentState,this._prevState}return e.prototype=Object.create(t.prototype),e.constructor=e,e.prototype.addStates=function(t,e){for(var n in t)this._states[n]=t[n];void 0!==e&&this.setCurrentState(e)},e.prototype.handleStateEvent=function(t,e){if(void 0!==this._currentState){var n=this._states[this._currentState],r=n[t];void 0!==r&&(this.setCurrentState(r),this.triggerChangeEvents(t,e))}},e.prototype.triggerChangeEvents=function(t,e){var n=this._currentState,r=this._prevState,e={event:t,from:r,to:n,data:e};this.emit("changeState:from."+r,e),this.emit("changeState:to."+n,e),this.emit("changeState:from."+r+">to."+n,e),this.emit("changeState",e)},e.prototype.changeState=function(t,e){this.setCurrentState(t),this.triggerChangeEvents(void 0,e)},e.prototype.setCurrentState=function(t){void 0!==this._currentState&&(this._prevState=this._currentState.toString()),this._currentState=t},e.prototype.getCurrentState=function(){return this._currentState},e.prototype.getPreviousState=function(){return this._prevState},e.prototype.onChangeState=function(t){this.on("changeState",t)},e.prototype.onChangeStateFrom=function(t,e){this.on("changeState:from."+t,e)},e.prototype.onChangeStateTo=function(t,e){this.on("changeState:to."+t,e)},e.prototype.onChangeStateFromTo=function(t,e,n){var r=null===t?"":"from."+t;null!==t&&null!==e&&(r+=">"),r+=null===e?"":"to."+e,this.on("changeState:"+r,n)},e});
//# sourceMappingURL=finitestatemachine.min.map