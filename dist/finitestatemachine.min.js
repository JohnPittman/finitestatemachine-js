!function(a,b){"function"==typeof define&&define.amd?define(["./../../eventhandler/dist/eventhandler.min.js"],b):"object"==typeof exports?module.exports=b(require("eventhandler")):a.FSM=b(a.EventHandler)}(this,function(a){"use strict";function b(b){a.call(this,b||this),this._states={},this._currentState,this._prevState}return b.prototype=Object.create(a.prototype),b.constructor=b,b.prototype.addStates=function(a,b){if("object"==typeof a)for(var c in a)this._states[c]=a[c];void 0!==b&&this.setCurrentState(b)},b.prototype.handleStateEvent=function(a){if(void 0!==this._currentState){var b=this._states[this._currentState],c=b[a];void 0!==c&&(this.setCurrentState(c),this.triggerChangeEvents(a))}},b.prototype.triggerChangeEvents=function(a){var b=this._currentState,c=this._prevState,d={event:a,from:c,to:b};this.emit("changeState:from."+c,d),this.emit("changeState:to."+b,d),this.emit("changeState:from."+c+">to."+b,d),this.emit("changeState",d)},b.prototype.changeState=function(a){this.setCurrentState(a),this.triggerChangeEvents()},b.prototype.setCurrentState=function(a){void 0!==this._currentState&&(this._prevState=this._currentState.toString()),this._currentState=a},b.prototype.getCurrentState=function(){return this._currentState},b.prototype.getPreviousState=function(){return this._prevState},b.prototype.onChangeState=function(a){this.on("changeState",a)},b.prototype.onChangeStateFrom=function(a,b){this.on("changeState:from."+a,b)},b.prototype.onChangeStateTo=function(a,b){this.on("changeState:to."+a,b)},b.prototype.onChangeStateFromTo=function(a,b,c){var d=null===a?"":"from."+a;null!==a&&null!==b&&(d+=">"),d+=null===b?"":"to."+b,this.on("changeState:"+d,c)},b});
//# sourceMappingURL=finitestatemachine.min.map